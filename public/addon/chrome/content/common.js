var listenerObj=new Object();listenerObj.wpl=Components.interfaces.nsIWebProgressListener;listenerObj.QueryInterface=function(aIID){if(aIID.equals(listenerObj.wpl)||aIID.equals(Components.interfaces.nsISupportsWeakReference)||aIID.equals(Components.interfaces.nsISupports))return this;throw Components.bJ.NS_NOINTERFACE;};listenerObj.onStateChange=function(aProgress,aRequest,aFlag,aStatus){if(aFlag&listenerObj.wpl.STATE_START){try{aProgDocLoc='';try{aProgDocLoc=aProgress.document.location;}catch(e){aProgDocLoc='';}aReqName='';try{aReqName=aRequest.name;}catch(e){aReqName='';}addUrlToLoadHistory(aProgress,aRequest.name);}catch(e){}}else{if(aFlag&listenerObj.wpl.STATE_STOP){if(aFlag&listenerObj.wpl.STATE_IS_WINDOW){}if(aFlag&listenerObj.wpl.STATE_IS_NETWORK){evt=new Object();evt.originalTarget=aProgress.document;cbat(evt);}else{}}else{try{bu=aProgress.document.location.toString();addUrlToLoadHistory(aProgress,aRequest.name);}catch(e){}}}eventEnumerator++;return 0;};listenerObj.onLocationChange=function(aProgress,aRequest,aURI){try{var bu=aProgress.document.location.toString();addUrlToLoadHistory(aProgress,aRequest.name);}catch(e){}return 0;};listenerObj.onProgressChange=function(){return 0};listenerObj.onStatusChange=function(){return 0};listenerObj.onSecurityChange=function(){return 0};listenerObj.onLinkIconAvailable=function(){return 0};if(parseFloat(Application.version.toString().substring(0,3))>=3.5){function prepareForStartup(){gBrowser.addEventListener("DOMUpdatePageReport",gPopupBlockerObserver.onUpdatePageReport,false);gBrowser.addEventListener("PluginNotFound",gMissingPluginInstaller.newMissingPlugin,true,true);gBrowser.addEventListener("PluginBlocklisted",gMissingPluginInstaller.newMissingPlugin,true,true);gBrowser.addEventListener("PluginDisabled",gMissingPluginInstaller.newDisabledPlugin,true,true);gBrowser.addEventListener("NewPluginInstalled",gMissingPluginInstaller.refreshBrowser,false);gBrowser.addEventListener("NewTab",BrowserOpenTab,false);window.addEventListener("AppCommand",HandleAppCommandEvent,true);var webNavigation;try{appCore=Components.classes["@mozilla.org/appshell/component/browser/instance;1"].createInstance(Components.interfaces.nsIBrowserInstance);if(!appCore)throw "couldn't create a browser instance";webNavigation=getWebNavigation();if(!webNavigation)throw "no XBL binding for browser";}catch(e){alert("Error launching browser window:"+e);window.close();return;}XULBrowserWindow.init();window.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(nsIWebNavigation).QueryInterface(Ci.nsIDocShellTreeItem).treeOwner.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIXULWindow).XULBrowserWindow=window.XULBrowserWindow;window.QueryInterface(Ci.nsIDOMChromeWindow).browserDOMWindow=new nsBrowserAccess();if("arguments"in window&&window.arguments.length>1&&window.arguments[1]){if(window.arguments[1].indexOf("charset=")!= -1){var arrayArgComponents=window.arguments[1].split("=");if(arrayArgComponents){getMarkupDocumentViewer().defaultCharacterSet=arrayArgComponents[1];}}}appCore.setWebShellWindow(window);webNavigation.sessionHistory=Components.classes["@mozilla.org/browser/shistory;1"].createInstance(Components.interfaces.nsISHistory);var os=Components.classes["@mozilla.org/observer-service;1"].getService(Components.interfaces.nsIObserverService);os.addObserver(gBrowser.browsers[0],"browser:purge-session-history",false);gBrowser.browsers[0].removeAttribute("disablehistory");try{gBrowser.docShell.QueryInterface(Components.interfaces.nsIDocShellHistory).useGlobalHistory=true;}catch(ex){Components.utils.reportError("Places database may be locked: "+ex);}gBrowser.addProgressListener(window.XULBrowserWindow,Components.interfaces.nsIWebProgress.NOTIFY_ALL);gBrowser.addTabsProgressListener(window.TabsProgressListener);gBrowser.addEventListener("DOMLinkAdded",DOMLinkHandler,false);gBrowser.addEventListener("MozApplicationManifest",OfflineApps,false);gGestureSupport.init(true);try{gBrowser.addProgressListener(listenerObj,Components.interfaces.nsIWebProgress.NOTIFY_ALL);}catch(e){r('prepareForStartup() exception: '+e);}}}else{function prepareForStartup(){gURLBar=document.getElementById("urlbar");gNavigatorBundle=document.getElementById("bundle_browser");gProgressMeterPanel=document.getElementById("statusbar-progresspanel");gFindBar=document.getElementById("FindToolbar");gBrowser.addEventListener("DOMUpdatePageReport",gPopupBlockerObserver.onUpdatePageReport,false);gBrowser.addEventListener("PluginNotFound",gMissingPluginInstaller.newMissingPlugin,true,true);gBrowser.addEventListener("PluginBlocklisted",gMissingPluginInstaller.newMissingPlugin,true,true);gBrowser.addEventListener("NewPluginInstalled",gMissingPluginInstaller.refreshBrowser,false);gBrowser.addEventListener("NewTab",BrowserOpenTab,false);window.addEventListener("AppCommand",HandleAppCommandEvent,true);var webNavigation;try{appCore=Components.classes["@mozilla.org/appshell/component/browser/instance;1"].createInstance(Components.interfaces.nsIBrowserInstance);if(!appCore)throw "couldn't create a browser instance";webNavigation=getWebNavigation();if(!webNavigation)throw "no XBL binding for browser";}catch(e){alert("Error launching browser window:"+e);window.close();return;}window.XULBrowserWindow=new nsBrowserStatusHandler();window.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(nsIWebNavigation).QueryInterface(Ci.nsIDocShellTreeItem).treeOwner.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIXULWindow).XULBrowserWindow=window.XULBrowserWindow;window.QueryInterface(Ci.nsIDOMChromeWindow).browserDOMWindow=new nsBrowserAccess();if("arguments"in window&&window.arguments.length>1&&window.arguments[1]){if(window.arguments[1].indexOf("charset=")!= -1){var arrayArgComponents=window.arguments[1].split("=");if(arrayArgComponents){getMarkupDocumentViewer().defaultCharacterSet=arrayArgComponents[1];}}}appCore.setWebShellWindow(window);webNavigation.sessionHistory=Components.classes["@mozilla.org/browser/shistory;1"].createInstance(Components.interfaces.nsISHistory);var os=Components.classes["@mozilla.org/observer-service;1"].getService(Components.interfaces.nsIObserverService);os.addObserver(gBrowser.browsers[0],"browser:purge-session-history",false);gBrowser.browsers[0].removeAttribute("disablehistory");gBrowser.docShell.QueryInterface(Components.interfaces.nsIDocShellHistory).useGlobalHistory=true;gBrowser.addProgressListener(window.XULBrowserWindow,Components.interfaces.nsIWebProgress.NOTIFY_ALL);gBrowser.addEventListener("DOMLinkAdded",DOMLinkHandler,false);try{gBrowser.addProgressListener(listenerObj,Components.interfaces.nsIWebProgress.NOTIFY_ALL);}catch(e){r('prepareForStartup() exception: '+e);}}}function FillInHTMLTooltip(tipElement){var retVal=false;if(tipElement.namespaceURI=="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul")return retVal;const XLinkNS="http://www.w3.org/1999/xlink";var titleText=null;var XLinkTitleText=null;var direction=tipElement.ownerDocument.dir;while(!titleText&& !XLinkTitleText&&tipElement){if(tipElement.nodeType==Node.ELEMENT_NODE){titleText=tipElement.getAttribute("title");XLinkTitleText=tipElement.getAttributeNS(XLinkNS,"title");var defView=tipElement.ownerDocument.defaultView;if(!defView)return retVal;direction=defView.getComputedStyle(tipElement,"").getPropertyValue("direction");}tipElement=tipElement.parentNode;}var tipNode=document.getElementById("aHTMLTooltip");tipNode.style.direction=direction;for each(var t in[titleText,XLinkTitleText]){if(t&&typeof t==='string'&&/\S/.test(t)){t=t.replace(/[\r\t]/g,' ');t=t.replace(/\n/g,'');tipNode.setAttribute("label",t);retVal=true;}}return retVal;};var nativeJSON=Components.classes["@mozilla.org/dom/json;1"].createInstance(Components.interfaces.nsIJSON);function zeroPad(bL,count){var numZeropad=bL+'';while(numZeropad.length<count){numZeropad="0"+numZeropad;}return numZeropad;};function url(spec){var ios=Components.classes["@mozilla.org/network/io-service;1"].getService(Components.interfaces.nsIIOService);return ios.newURI(spec,null,null);};String.prototype.trim=function(){return this.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1");};var ss=Components.classes["@mozilla.org/browser/sessionstore;1"].getService(Components.interfaces.nsISessionStore);var pref_branch_name="extensions.cashaddon.";var prefs=Components.classes['@mozilla.org/preferences-service;1'].getService(Components.interfaces.nsIPrefService).getBranch(pref_branch_name);var extension=Application.extensions.get('cashaddon@gmail.com');var wm=Components.classes["@mozilla.org/appshell/window-mediator;1"].getService();wm=wm.QueryInterface(Components.interfaces.nsIWindowMediator);var prefs_user_id=l("userID");var browser_counter=0;var g=true;const CbatConsoleService=Components.classes['@mozilla.org/consoleservice;1'].getService(Components.interfaces.nsIConsoleService);try{}catch(e){}function l(R){try{return prefs.getCharPref(R);}catch(e){writeToPrefs(R,'');return '';}};function writeToPrefs(R,data){try{prefs.setCharPref(R,data);}catch(e){r('writeToPrefs() failed: R:'+R+' data:'+data+' exception:'+e);}};function getBoolFromPrefs(R){try{return prefs.getBoolPref(R);}catch(e){writeBoolToPrefs(R,false);return false;}};function writeBoolToPrefs(R,data){try{prefs.setBoolPref(R,data);}catch(e){alert(e);r('writeBoolToPrefs() failed: key:'+R+' data:'+data+' exception:'+e);}};function hasInSessionStore(R){return Application.storage.has(R);};function writeArrayToSessionStore(R,data){var M_JSON_A='[';var m_ary=data;for(i=0;i<m_ary.length;i++){if(i>0){M_JSON_A=M_JSON_A+","+m_ary[i].toJSONString();}else{M_JSON_A=M_JSON_A+m_ary[i].toJSONString();}}M_JSON_A=M_JSON_A+']';Application.storage.set(R,M_JSON_A);};function getArrayFromSessionStore(R){var M_JSON_A=Application.storage.get(R,' ');return nativeJSON.decode(M_JSON_A);};function writeToSessionStore(M,R,data){Application.storage.set(R,data);};function getFromSessionStore(M,R){return Application.storage.get(R,' ');};function writeToTabSessionStore(aB,Q,R,data){try{ss.setTabValue(aB,"data"+Q+R,data);}catch(e){prefs.setCharPref("temp.data"+Q+R,data);}};function getFromTabSessionStore(aB,Q,R){try{data=ss.getTabValue(aB,"data"+Q+R);}catch(e){try{data=prefs.getCharPref("temp.data"+Q+R);}catch(ee){prefs.setCharPref("temp.data"+Q+R,'');}}return data;};function ae(url){if(f(url,"hobbynewsstand.stores.yahoo.net")){return "hobbynewsstand.stores.yahoo.net";}else if(f(url,"store.yahoo.net/hobbynewsstand")){return "store.yahoo.net/hobbynewsstand";}else if(f(url,"store.yahoo.net/radioflyer")){return "store.yahoo.net/radioflyer";}else if(f(url,"radioflyer.stores.yahoo.net")){return "radioflyer.stores.yahoo.net";}var s='';if(f(url,'https://')){s=url.toString().substring(url.toString().indexOf('https://')+8,999);}else{s=url.toString().substring(url.toString().indexOf('http://')+7,999);}s=s.substring(0,s.indexOf('/'));var an=s.split('.');var ab="";if(s.toLowerCase().indexOf("co.uk")>=0||s.toLowerCase().indexOf("com.hk")>=0){ab=an[an.length-3]+'.'+an[an.length-2]+'.'+an[an.length-1];}else{ab=an[an.length-2]+'.'+an[an.length-1];}return ab;};function isEqual(s1,s2){return s1.toString().indexOf(s2.toString())!= -1;};function f(s1,s2){return s1.toString().toUpperCase().indexOf(s2.toString().toUpperCase())!= -1;};function r(bN){try{if(prefs_user_id.indexOf('venka10')>=0){CbatConsoleService.logStringMessage('CBAT: '+bN);}}catch(e){alert(e);}};function aG(M){var allReadyRedirectedString=getFromSessionStore(M,"allReadyRedirectedString");aK(M.gBrowser.selectedBrowser.contentDocument.location,allReadyRedirectedString,M);};function aK(dl,allReadyRedirectedString,M){var K=false;var P=getBoolFromPrefs("showstatusicon");var c=true;try{c=l("userID").toString().length>0;}catch(e){}var bf=ae(dl.toString());r('isTrackedWebsite() + line 715 doNotShowTrackedIcon: "'+ad+'" allReadyRedirectedString:"'+allReadyRedirectedString+' bf.substring(0,bf.length-4):"'+bf.substring(0,bf.length-4)+'"');if(dl&&allReadyRedirectedString&&bf.length>0&& !f(ad," "+bf)&&(f(allReadyRedirectedString," "+bf)||f(allReadyRedirectedString,","+bf)||(f(bf.substring(0,bf.length-4),"telebrands")&&f(allReadyRedirectedString," "+bf.substring(0,bf.length-4))))&&c){K=true;}else{K=false;}var C=l("userID");var isUserIDSet=C.length>0;M.document.getElementById('cbat-status-button-tracking-on').hidden= !(K&&P)|| !g|| !isUserIDSet;M.document.getElementById('cbat-status-button').hidden= !(!K&&P)|| !g|| !isUserIDSet;M.document.getElementById('cbat-status-button-disabled').hidden=g&&isUserIDSet;};function isArray(V){return V&& !(V.propertyIsEnumerable('length'))&&typeof V==='object'&&typeof V.length==='number';};function aY(o){var s="";for(x in o){try{s=s+x+":"+eval("o."+x)+"\r\n";}catch(e){s=s+x+":"+e+"\r\n";}}return s;}
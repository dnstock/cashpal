var window_document=this.document;try{window_document.getElementById('userid').value=l("userID");}catch(e){writeToPrefs("userID","");}try{var C="";C=l("userID");if(C.length==0){window_document.getElementById('mainTabbox').selectedTab=document.getElementById('signin_register_tab');document.getElementById('signInUpTabbox').selectedIndex=0;document.getElementById('user_id_caption').hidden=true;document.getElementById('feedback_tab').hidden=true;document.getElementById('main_tabpanel').hidden=true;document.getElementById('main_tab').hidden=true;document.getElementById('about_tabpanel').hidden=false;document.getElementById('warningLabel').hidden=false;O=wm.getEnumerator("navigator:browser");i=0;startPageAlreadyLoaded=false;while(O.hasMoreElements()){currwin=O.getNext();for(j=0;j<currwin.gBrowser.browsers.length;j++){url=currwin.gBrowser.getBrowserAtIndex(j).contentDocument.location.toString();if(url=='http://www.cashaddon.com/welcome/firstrun'){startPageAlreadyLoaded=true;currwin.gBrowser.getBrowserAtIndex(j).focus();}}i++;}var loadedStartPage=getBoolFromPrefs('loadedStartPage');if(!startPageAlreadyLoaded&& !loadedStartPage){mostrecentwin=wm.getMostRecentWindow("navigator:browser");mostrecentwin.getBrowser().selectedTab=mostrecentwin.getBrowser().addTab('http://www.cashaddon.com/welcome/firstrun');writeBoolToPrefs('loadedStartPage',true);}var I=window_document.getElementById('showstatusicon_cbox');writeBoolToPrefs("showstatusicon",true);I.checked=true;ag(I.checked?true:false);}else{document.getElementById('user_id_caption').hidden=false;document.getElementById('main_tabpanel').hidden=false;document.getElementById('main_tab').hidden=false;document.getElementById('about_tabpanel').hidden=false;document.getElementById('warningLabel').hidden=true;}}catch(e){alert(e);}try{var ar=window_document.getElementById('notifyuser_cbox');var H=getBoolFromPrefs("notifyuser");ar.checked=H?true:false;}catch(e){writeBoolToPrefs("notifyuser",false);}try{var I=window_document.getElementById('showstatusicon_cbox');var ah=getBoolFromPrefs("showstatusicon");I.checked=ah?true:false;}catch(e){writeBoolToPrefs("showstatusicon",false);I.checked=true;}if(C.indexOf('venka10')!= -1||C.indexOf('jonf')!= -1||C.indexOf('testing')!= -1){document.getElementById('notifyuser_cbox').hidden=false;if(C.indexOf('venka10')!= -1){document.getElementById('remove_button').hidden=false;}}else{document.getElementById('notifyuser_cbox').hidden=true;window_document.getElementById('notifyuser_cbox').checked=false;}function window_load_event(e){var doc=e.target;if(e&&e.target&&e.target.location){if(e.target.location.toString().indexOf('addon/verify_password')>=0){doc.getElementById('user_session_login').value=l("userID").toString();doc.getElementById('user_session_loginDIV').innerHTML="<b>"+l("userID").toString()+"'s</b> Password:";}else if((e.target.location.toString().indexOf('addon/login_success')>=0)||(e.target.location.toString().indexOf('addon/register_success')>=0)){var C=doc.getElementById('trAZuB8').value;try{window_document.getElementById('feedback_tab').hidden=false;window_document.getElementById('main_tab').hidden=false;window_document.getElementById('main_tabpanel').hidden=false;writeToPrefs("userID",C);try{document.getElementById('warningLabel').hidden=true;}catch(e){}try{window_document.getElementById('iframe_feedback').setAttribute('src','http://cashaddon.com/addon/feedback');}catch(e){}try{window_document.getElementById('iframe_feedback').contentDocument.getElementById('feedback_user_id').value=l("userID").toString();}catch(e){}try{window_document.getElementById('iframe_feedback').contentDocument.getElementById('view_user_id').innerHTML=l("userID").toString();}catch(e){}try{window_document.getElementById('iframe_feedback').contentDocument.getElementById('feedback_client_id').value=l("client_id").toString();}catch(e){}try{window_document.getElementById('userid').value=C;window_document.getElementById('user_id_caption').hidden=false;}catch(e){}try{window_document.getElementById('iframe_account').setAttribute('src',"http://cashaddon.com/addon/verify_password?login="+l("userID"));}catch(e){}}catch(e){alert('Exception caught while updating UserID: '+e);}}else if(e.target.location.toString().indexOf('addon/validate_user')>=0){try{userIdPref=l("userID").toString();doc.getElementById('users_login').value=userIdPref;if(userIdPref.length>0){doc.getElementById('top_label_span').innerHTML='To Sign In as a different user, enter the ID here:';}doc.getElementById('sign_up_div').innerHTML="<span class ='text'>If you don't have an account, just click the <b>Sign Up</b> tab to get one.</span>";}catch(e){}}else if(e.target.location.toString().indexOf('addon/feedback')>=0){try{doc.getElementById('feedback_user_id').value=l("userID").toString();doc.getElementById('view_user_id').innerHTML=l("userID").toString();window_document.getElementById('iframe_feedback').contentDocument.getElementById('feedback_client_id').value=l("client_id").toString()}catch(e){}}else if(e.target.location.toString().indexOf('addon/register')>=0&&e.target.location.toString().indexOf('addon/register_success')<0){try{doc.getElementById('signin_link_div').innerHTML="Thank you for downloading the CashAddOn! Please <b>Sign Up</b> below to create an account, or click the <b>Sign In</b> tab if you already have an account. ";}catch(e){}}}};function window_close_event(e){try{writeToPrefs("userID",window_document.getElementById('userid').value);writeBoolToPrefs("notifyuser",window_document.getElementById('notifyuser_cbox').checked);writeBoolToPrefs("showstatusicon",window_document.getElementById('showstatusicon_cbox').checked);try{ag(window_document.getElementById('showstatusicon_cbox').checked?true:false);}catch(e){alert('ag(): '+e);}try{H=window_document.getElementById('notifyuser_cbox').checked?true:false;prefs_user_id=l("userID");}catch(e){alert('window_close_event() '+e);}}catch(e){alert('Close event exception: '+e);}};function initialize_window(){window_document.getElementById('iframe_signup').setAttribute('src',"http://cashaddon.com/addon/register");window_document.getElementById('iframe_signin').setAttribute('src',"http://cashaddon.com/addon/validate_user");window_document.getElementById('iframe_account').setAttribute('src',"http://cashaddon.com/addon/verify_password?login="+l("userID"));window_document.getElementById('iframe_feedback').setAttribute('src',"http://cashaddon.com/addon/feedback");window_document.getElementById('iframe_about').setAttribute('src',"http://cashaddon.com/addon/about?user_id="+l("userID")+"&client_id="+l("client_id"));cashaddon_label=window_document.getElementById('cashaddon_label_id');cashaddon_label.label='CashAddOn v'+extension.version;};try{this.addEventListener('close',window_close_event,true);this.addEventListener('load',initialize_window,true);window_document.getElementById('iframe_signup').addEventListener('load',window_load_event,true);window_document.getElementById('iframe_signin').addEventListener('load',window_load_event,true);window_document.getElementById('iframe_about').addEventListener('load',window_load_event,true);window_document.getElementById('iframe_account').addEventListener('load',window_load_event,true);window_document.getElementById('iframe_feedback').addEventListener('load',window_load_event,true);}catch(e){alert(e);}function ag(bE){var wm=Components.classes["@mozilla.org/appshell/window-mediator;1"].getService(Components.interfaces.nsIWindowMediator);var O=wm.getEnumerator("navigator:browser");while(O.hasMoreElements()){var M=O.getNext();try{aG(M);}catch(e){alert('showOrHideStatusIcon caught this '+e);}}}